# .env.example
# Template de Projeto Multiplataforma
# Arquivo de configuração de ambiente - COPIE para .env e ajuste os valores

# ========================================
# Database Configuration
# ========================================
APP_DB_NAME=app
APP_DB_USER=postgres
APP_DB_PASSWORD=postgres
APP_DB_PORT=5432
APP_DB_TZ=Etc/UTC
APP_DB_IMAGE_NAME=dominio-db
APP_DB_CONTAINER_NAME=dominio-db

# ========================================
# Prototype Database Configuration
# ========================================
# Banco de dados PostGIS para o protótipo MVP de marketplace de produtos
# NOTA: Use uma porta diferente de APP_DB_PORT para evitar conflitos
APP_DB_NAME=db
APP_DB_USER=postgres
APP_DB_PASSWORD=postgres
APP_DB_PORT=5434
APP_DB_TZ=Etc/UTC
APP_DB_LANG=C.UTF-8
APP_DB_LC_ALL=C.UTF-8
APP_DB_IMAGE_NAME=db
APP_DB_CONTAINER_NAME=db
APP_DB_HOST=db

# ========================================
# Landing Database Configuration (Cadastro)
# ========================================
APP_DB_CADASTRO_NAME=cadastro
APP_DB_CADASTRO_USER=postgres
APP_DB_CADASTRO_PASSWORD=postgres
APP_DB_CADASTRO_PORT=5433
APP_DB_CADASTRO_TZ=Etc/UTC
APP_DB_CADASTRO_IMAGE_NAME=landing-db
APP_DB_CADASTRO_CONTAINER_NAME=landing-db


# ========================================
# Landing Page Configuration
# ========================================
APP_LANDING_NODE_ENV=production
APP_LANDING_PORT=7777
APP_LANDING_IMAGE_NAME=dominio-landing
APP_LANDING_CONTAINER_NAME=dominio-landing
APP_LANDING_VITE_PUBLIC_URL=https://template-monorepo.cranio.dev
APP_LANDING_VITE_OAUTH_CALLBACK_URL=https://template-monorepo.cranio.dev/oauth2/callback
APP_LANDING_VITE_POSTGREST_BASE_URL=http://localhost:3000

# Contact Email Configuration
APP_LANDING_VITE_PRIVACY_EMAIL=privacidade@cranio.dev

# ========================================
# Holding Page Configuration
# ========================================
APP_HOLDING_PORT=8080
APP_HOLDING_IMAGE_NAME=dominio-holding
APP_HOLDING_CONTAINER_NAME=dominio-holding

# ========================================
# OAuth2 Proxy Configuration
# ========================================
# OBRIGATÓRIO: Configure essas variáveis para autenticação Google
GOOGLE_CLIENT_ID=your-google-client-id-here
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

# Configurações OAuth2 Proxy
APP_OAUTH2_PROXY_CONTAINER_NAME=dominio-oauth2
APP_OAUTH2_PROXY_PORT=5180
APP_OAUTH2_PROXY_REDIRECT_URL=https://template-monorepo.cranio.dev/oauth2/callback
APP_OAUTH2_PROXY_EMAIL_DOMAINS=*
APP_OAUTH2_PROXY_UPSTREAMS=http://landing:80
APP_OAUTH2_PROXY_REVERSE_PROXY=true
APP_OAUTH2_PROXY_SET_AUTHORIZATION_HEADER=true
APP_OAUTH2_PROXY_SKIP_PROVIDER_BUTTON=true
APP_OAUTH2_PROXY_HTTP_ADDRESS=0.0.0.0:5180

# OBRIGATÓRIO: Gere um cookie secret seguro (32 caracteres)
# Exemplo: openssl rand -base64 32
APP_OAUTH2_PROXY_COOKIE_SECRET=your-32-character-cookie-secret-here

# Configurações de Cookie (para produção)
APP_OAUTH2_PROXY_COOKIE_SECURE=true
APP_OAUTH2_PROXY_COOKIE_SAMESITE=none
APP_OAUTH2_PROXY_COOKIE_CSRF_PER_REQUEST=false


# ========================================
# Google Maps API Configuration
# ========================================
# OBRIGATÓRIO: Chaves de API do Google Maps para integração de geolocalização
# Documentação: docs/rup/99-anexos/MVP/plano-integracao-google-maps.md

# Chave para uso no frontend (restrita por domínio)
GOOGLE_MAPS_API_KEY=your-google-maps-api-key-here

# Chave para uso no backend (restrita por IP/serviço)
GOOGLE_MAPS_SERVER_KEY=your-google-maps-server-key-here

# ========================================
# Google SSO Configuration (Prototype MVP)
# ========================================
# OBRIGATÓRIO: Credenciais OAuth 2.0 para autenticação Google SSO
# Documentação: docs/rup/99-anexos/MVP/plano-integracao-google-sso.md
# Configure no Google Cloud Console: console.cloud.google.com

# Client ID do Google (usado no frontend - exposto no navegador)
APP_GOOGLE_CLIENT_ID=your-google-client-id-here.apps.googleusercontent.com

# Client Secret do Google (usado no backend - NUNCA exposto)
APP_GOOGLE_CLIENT_SECRET=your-google-client-secret-here

# Chave secreta para assinatura de tokens JWT (mínimo 32 caracteres)
# Gere com: openssl rand -base64 32
APP_JWT_SECRET=your-jwt-secret-minimum-32-characters-here

# Tempo de expiração do JWT (padrão: 24 horas)
APP_JWT_EXPIRES_IN=24h

# ========================================
# Prototype API Configuration
# ========================================
APP_API_IMAGE_NAME=api
APP_API_CONTAINER_NAME=api
APP_API_NODE_ENV=production
APP_API_PORT=3001
APP_API_HEALTHCHECK_URL=http://localhost:3001/app/api/health

# ========================================
# Prototype UI Configuration
# ========================================
# URL base da API para a UI do protótipo
# IMPORTANTE: NÃO inclua /api no final da URL (o código já adiciona automaticamente)
# 
# Desenvolvimento local (acessado do navegador):
#   APP_UI_VITE_API_BASE_URL=http://localhost:3001
#
# Produção (via Caddy reverse proxy):
#   APP_UI_VITE_API_BASE_URL=https://template-monorepo.cranio.dev
#   (NÃO use https://template-monorepo.cranio.dev/api - causa duplicação de /api)
#
# Documentação: docs/rup/99-anexos/MVP/correcao-api-base-url.md
APP_UI_VITE_API_BASE_URL=http://localhost:3001
# Client ID do Google para o frontend (mesmo valor de APP_GOOGLE_CLIENT_ID)
APP_UI_VITE_GOOGLE_CLIENT_ID=your-google-client-id-here.apps.googleusercontent.com
APP_UI_IMAGE_NAME=ui
APP_UI_CONTAINER_NAME=ui
APP_UI_NODE_ENV=production
APP_UI_PORT=5174

# ========================================
# Prototype Caddy Configuration (HTTPS Automático)
# ========================================
# OBRIGATÓRIO: Configurações do Caddy para HTTPS automático via Let's Encrypt
# Documentação: docs/rup/99-anexos/MVP/plano-deploy-google-sso.md
APP_CADDY_IMAGE_NAME=caddy
APP_CADDY_CONTAINER_NAME=caddy
APP_CADDY_DOMAIN=template-monorepo.cranio.dev
APP_CADDY_EMAIL=admin@cranio.dev
APP_CADDY_HTTP_PORT=80
APP_CADDY_HTTPS_PORT=443
# Endereço IPv6 para escutar (formato: 2a02:c207:2288:9919::10)
APP_CADDY_LISTEN_HOST=2a02:c207:2288:9919::10

# ========================================
# Gmail API Configuration (Prototype MVP)
# ========================================
# OBRIGATÓRIO: Credenciais OAuth 2.0 para integração Gmail API
# Documentação: docs/rup/99-anexos/MVP/plano-integration-gmail.md
# Configure no Google Cloud Console: console.cloud.google.com

# Client ID do Google OAuth 2.0 (Desktop application)
GMAIL_CLIENT_ID=your-gmail-client-id-here.apps.googleusercontent.com

# Client Secret do Google OAuth 2.0
GMAIL_CLIENT_SECRET=your-gmail-client-secret-here

# Refresh Token OAuth 2.0 (offline access)
# Obtido através do fluxo OAuth 2.0 com escopo gmail.send
GMAIL_REFRESH_TOKEN=your-gmail-refresh-token-here

# Endereço de remetente para notificações transacionais
GMAIL_SENDER=noreply@cranio.dev

# ========================================
# Prototype Job Configuration (CSV Onboarding Worker)
# ========================================
# Worker NestJS para ingestão automatizada de CSV de onboarding
# Documentação: docs/rup/99-anexos/MVP/plano-job-onboarding-project.md

APP_JOB_IMAGE_NAME=job
APP_JOB_CONTAINER_NAME=job
APP_JOB_NODE_ENV=development
APP_JOB_PORT=3002

# Diretórios de trabalho (mapeados via Docker volumes)
APP_JOB_INBOX=/var/data/inbox
APP_JOB_PROCESSED=/var/data/processed
APP_JOB_FAILED=/var/data/failed

# URL da API para envio de produtos
APP_API_BASE_URL=http://api:3001

# Token de serviço para autenticação
# OBRIGATÓRIO: Gere um token seguro (ex: openssl rand -base64 32)
APP_JOB_SERVICE_TOKEN=default-service-token

# Configurações do worker
APP_JOB_POLL_INTERVAL=60000
APP_JOB_BATCH_SIZE=100
APP_JOB_MAX_RETRIES=3
APP_JOB_LOG_LEVEL=info

# ========================================
# OpenRouter AI Configuration (Onboarding)
# ========================================
# OBRIGATÓRIO: Chave de API do OpenRouter para agentes de IA
# Documentação: docs/rup/99-anexos/MVP/plano-ai-onboarding-email.md
# Configure em: https://openrouter.ai/keys

OPENROUTER_API_KEY=your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/app/api/v1/chat/completions
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
OPENROUTER_HTTP_REFERER=
OPENROUTER_APP_TITLE=APP

# URL base da aplicação (para links em emails)
APP_BASE_URL=http://localhost:5174
